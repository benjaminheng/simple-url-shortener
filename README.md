# Simple URL Shortener

**Notable files:** [server.js](https://github.com/benjaminheng/simple-url-shortener/blob/master/app/server/server.js), [App.js](https://github.com/benjaminheng/simple-url-shortener/blob/master/app/common/containers/App.js), [urlService.js](https://github.com/benjaminheng/simple-url-shortener/blob/master/app/common/utils/urlService.js)

## Technical details

- A sqlite3 database is used to store the URLs
    - Database is in-memory as a proof-of-concept.
    - Schema: `id integer, url text`
- The following method is used to generate the shortened IDs: http://stackoverflow.com/questions/742013/how-to-code-a-url-shortener
    - Basically, the url is added to the database. The row's ID is autogenerated by sqlite3. I take this row ID and convert it to a base-62 encoded string. This string is used as the short URL.
    - One limitation of this method is that shortened URLs are somewhat predictable (`aaa` will be `aab` next)
    - I [initialize the autoincrement](https://github.com/benjaminheng/simple-url-shortener/blob/2bd6e3e33da6fd550e13c7c1a785c6cf440aff7b/app/server/server.js#L20) to `1234567` so it won't start generating from 1='a', 2='b' and so on.

## Application flow

### Generating a short URL 

- API request is sent to generate a short URL
    - `/api/getShortId?url={url}`
- `url` is added to database and its row ID (integer) is selected.
- Row ID is encoded to a base-62 string
- Encoded value is used as the short URL.

### Retrieving the long URL

- API request is sent to retrieve the long URL
- The short URL is decoded to get the row ID
- The row ID is used to select the long URL

## Usage

```
npm install
npm run start
```
